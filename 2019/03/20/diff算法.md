# diff 算法

## 目录
 - [简介](#简介)
 - [如何阅读源码](#如何阅读源码)
 - vdom 为何使用 diff 算法
### 简介

diff 是 Unix 系统一个很重要的工具程序, 它用来比较两个文本文件的差异, 是代码版本管理的基石之一.

命令:

```
diff <变动前的文件> <变动后的文件>
```

diff 的三种格式：

```
正常格式: normal diff
diff a b

上下文格式: context diff
diff -c a b

合并格式: unified diff
diff -u a b
```

示例:
```
// 文件 a.txt
a
a
a
a

// 文件 b.txt
a
b
a
a
```

比较 `a` 和 `b` 文件

显示:

```
$ diff a.txt b.txt
2c2
< a
---
> b
```

提示信息第一行 `2c2` 说明变动位置

它分成 3 个部分: 
前面的 `2`, 表示 a 文件的第 2 行有变化; 后面的 `2`, 表示 b 文件变动第 2 行;
中间的 `c` 表示变动模式
```
c: change 内容改变
a: addition 增加
d: deletion 删除
```


### 如何阅读源码

- diff 算法非常复杂, 实现难度很大, 源码量很大.
- 去繁就简, 不关心细节, 阅读源码不能像看小说一样一行一行看, 太浪费时间和精力.

### vdom 为何使用 diff 算法

- dom 操作是“昂贵”的, 因此尽量减少 DOM 操作
- 找出本次 DOM 必须更新的节点来更新, 其他的不更新
- 这个 "找出" 过程, 就需要 diff 算法
